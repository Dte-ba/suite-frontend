{{yield}}

{{#if tarea}}

  {{#if tarea.last.isError}}
    {{suite-tabla-error-de-api error=tarea.last.error}}
  {{else}}

    {{#data-table data=tarea.lastSuccessful.value.data classNames='ui celled striped table selectable' as |t|}}

      {{#each columnas as |columna|}}

        {{#t.column propertyName=columna.atributo defaultHeader=true name=columna.titulo as |col|}}

          {{#if columna.template}}
            {{component columna.template valor=(get col.row columna.atributo)}}
          {{else if columna.componente}}
            {{component columna.componente model=col.row}}
          {{else}}

            {{#if columna.promesa}}
              {{suite-espera-promesa promesa=(get col.row columna.promesa)}}
            {{/if}}

            {{#if columna.ruta}}
              {{#if columna.promesa}}
                {{#link-to columna.ruta (get col.row columna.promesa)}} {{get col.row columna.atributo}} {{/link-to}}
              {{else}}
                {{#link-to columna.ruta col.row}} {{get col.row columna.atributo}} {{/link-to}}
              {{/if}}
            {{else}}
              {{#if columna.fecha}}
                {{suite-fecha fecha=(get col.row columna.atributo)}}
              {{else}}
                {{get col.row columna.atributo}}
              {{/if}}
            {{/if}}

          {{/if}}

        {{/t.column}}

      {{else}}
        Imposible dibujar la tabla, no especific√≥ el atributo 'columnas'.
      {{/each}}

    {{/data-table}}


    {{#unless tarea.lastSuccessful.value.data}}
      {{#if tarea.last.isRunning}}
        {{suite-tabla-skeleton columnas=columnas}}
      {{else}}
        <div class="centrado">Sin datos para mostrar</div>
      {{/if}}
    {{/unless}}

    {{#if paginacion}}
      {{suite-tabla-paginador
          meta=tarea.lastSuccessful.value.meta
          cuandoCambiaPagina=(action "cambiarPagina")
          pagina=pagina}}
    {{/if}}

      {{#if tarea.last.isRunning}}
        <div class="overlay-spinner">
          {{suite-tabla-spinner}}
        </div>
      {{/if}}

  {{/if}}
{{/if}}
